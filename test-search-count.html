<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¤œç´¢çµæœä»¶æ•°ãƒ†ã‚¹ãƒˆ</title>
</head>
<body style="padding: 20px; font-family: Arial, sans-serif;">
    <h1>æ¤œç´¢çµæœä»¶æ•°è¡¨ç¤ºãƒ†ã‚¹ãƒˆ</h1>
    
    <div style="background-color: #edf2f7; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
        <h2>ğŸ” æ¤œç´¢ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h2>
        <p>æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãŒã“ã“ã«ã‚ã‚Šã¾ã™</p>
        
        <button onclick="testSearchCount()" style="background-color: #38a169; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 10px 5px;">
            ğŸ” æ¤œç´¢ãƒ†ã‚¹ãƒˆ
        </button>
        
        <button onclick="showTestCount()" style="background-color: #3182ce; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 10px 5px;">
            ğŸ“Š ä»¶æ•°è¡¨ç¤ºãƒ†ã‚¹ãƒˆ
        </button>
        
        <!-- æ¤œç´¢çµæœä»¶æ•°è¡¨ç¤º -->
        <div id="searchResultCount" style="background-color: #e6fffa; border-left: 4px solid #319795; padding: 12px 20px; margin: 20px 0 0 0; border-radius: 6px; font-weight: 600; color: #2c7a7b; display: none; font-size: 16px;">
            <!-- æ¤œç´¢çµæœä»¶æ•°ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
        </div>
    </div>
    
    <div style="background-color: #f7fafc; padding: 15px; border-radius: 5px; margin: 10px 0;">
        <strong>è¦ç´ ã®çŠ¶æ…‹:</strong>
        <div id="elementStatus">ãƒã‚§ãƒƒã‚¯å¾…ã¡...</div>
    </div>
    
    <div style="background-color: #fff5f5; padding: 15px; border-radius: 5px; margin: 10px 0;">
        <strong>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°:</strong>
        <div id="logOutput" style="font-family: monospace; font-size: 12px; white-space: pre-wrap; max-height: 200px; overflow-y: auto;">ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
    </div>

    <script>
        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚’ãƒšãƒ¼ã‚¸å†…ã«è¡¨ç¤ºã™ã‚‹é–¢æ•°
        function addLog(message) {
            const logOutput = document.getElementById('logOutput');
            const timestamp = new Date().toLocaleTimeString();
            logOutput.textContent += `[${timestamp}] ${message}\n`;
            logOutput.scrollTop = logOutput.scrollHeight;
            console.log(message);
        }

        // è¦ç´ ã®çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹é–¢æ•°
        function checkElementStatus() {
            const countElement = document.getElementById('searchResultCount');
            const statusElement = document.getElementById('elementStatus');
            
            if (countElement) {
                const computedStyle = window.getComputedStyle(countElement);
                statusElement.innerHTML = `
                    âœ… è¦ç´ ã¯å­˜åœ¨ã—ã¾ã™<br>
                    display: ${computedStyle.display}<br>
                    visibility: ${computedStyle.visibility}<br>
                    innerHTML: "${countElement.innerHTML}"
                `;
                addLog('searchResultCountè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ');
            } else {
                statusElement.innerHTML = 'âŒ searchResultCountè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“';
                addLog('searchResultCountè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }
        }

        // æ¤œç´¢çµæœä»¶æ•°ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
        function showSearchResultCount(filteredCount, totalCount) {
            const countElement = document.getElementById('searchResultCount');
            
            addLog(`showSearchResultCount called: ${filteredCount}/${totalCount}`);
            
            if (!countElement) {
                addLog('ERROR: searchResultCount element not found');
                return;
            }
            
            const percentage = totalCount > 0 ? Math.round((filteredCount / totalCount) * 100) : 0;
            
            if (filteredCount === totalCount) {
                countElement.innerHTML = `ğŸ“‹ <strong>å…¨æ–½è¨­è¡¨ç¤ºä¸­: ${totalCount}ä»¶</strong>`;
            } else {
                countElement.innerHTML = `ğŸ” <strong>æ¤œç´¢çµæœ: ${filteredCount}ä»¶</strong> / å…¨${totalCount}ä»¶ä¸­ (${percentage}%)`;
            }
            
            countElement.style.display = 'block';
            countElement.style.visibility = 'visible';
            addLog('Count display updated: ' + countElement.innerHTML);
        }

        // ãƒ†ã‚¹ãƒˆé–¢æ•°
        function testSearchCount() {
            addLog('testSearchCount function called');
            showSearchResultCount(3, 10);
            checkElementStatus();
        }
        
        function showTestCount() {
            addLog('showTestCount function called');
            showSearchResultCount(10, 10);
            checkElementStatus();
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è¦ç´ çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
        document.addEventListener('DOMContentLoaded', function() {
            addLog('Page loaded, checking element status...');
            checkElementStatus();
        });
    </script>
</body>
</html>